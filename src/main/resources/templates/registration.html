<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<div th:replace="fragments/head :: head"></div>

<body>
<div th:replace="fragments/header :: header"></div>

<div class="container-sm">
    <form id="registration-form"
          class="form-horizontal my-3"
          th:object="${participantRegistration}"
          method="post">
        <input th:field="*{event.id}" id="id"
               type="text"
               hidden
               required
               readonly/>
        <fieldset>
            <legend>The Wichteln event you may register for</legend>
            <div class="form-row">
                <div class="form-group col-sm-6">
                    <label for="title">What's the occasion?</label>
                    <input th:field="*{event.title}" id="title"
                           class="form-control"
                           type="text"
                           placeholder="AC/DC Secret Santa"
                           required
                           readonly/>
                </div>
                <div class="form-group col-sm-6">
                    <label for="description">What do participants need to know?</label>
                    <textarea th:field="*{event.description}"
                              id="description"
                              class="form-control"
                              placeholder="There's gonna be some santa'ing!"
                              required
                              readonly>
                    </textarea>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-sm-6">
                    <label for="monetary-amount-number">How much to spend on a gift?</label>
                    <input th:field="*{event.monetaryAmount.number}"
                           id="monetary-amount-number"
                           class="form-control"
                           type="number"
                           step="0.01"
                           placeholder="78"
                           required
                           readonly/>
                </div>
                <div class="form-group col-sm-6">
                    <label for="title">In what currency?</label>
                    <select id="monetary-amount-currency"
                            class="form-control"
                            th:field="*{event.monetaryAmount.currency}"
                            readonly>
                        <option th:each="currency : ${T(javax.money.Monetary).getCurrencies()}"
                                th:value="${currency}"
                                th:text="${currency}"
                                th:selected="*{event.monetaryAmount.currency}">
                        </option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-sm-6">
                    <label for="local-date">On what day?</label>
                    <input th:field="*{{event.localDate}}"
                           id="local-date"
                           class="form-control"
                           type="date"
                           required
                           readonly/>
                </div>
                <div class="form-group col-sm-6">
                    <label for="local-time">At what hour?</label>
                    <input th:field="*{{event.localTime}}"
                           id="local-time"
                           class="form-control"
                           type="time"
                           required
                           readonly/>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-sm-6">
                    <label for="timezone">Timezone</label>
                    <select id="timezone"
                            class="form-control"
                            th:field="*{event.timezone}"
                            readonly>
                        <option th:each="timezone : ${T(java.time.ZoneId).getAvailableZoneIds()}"
                                th:value="${T(java.time.ZoneId).of(timezone)}"
                                th:text="${timezone}"
                                th:selected="*{event.timezone}">
                        </option>
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-sm-6">
                    <label for="host-name">Who's hosting?</label>
                    <input th:field="*{event.host.name}"
                           id="host-name"
                           class="form-control"
                           type="text"
                           placeholder="George Young"
                           required
                           readonly/>
                </div>
                <div class="form-group col-sm-6">
                    <label for="host-email">What's their email?</label>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">@</span>
                        </div>
                        <input th:field="*{event.host.email}"
                               id="host-email"
                               class="form-control"
                               type="text"
                               placeholder="georgeyoung@acdc.net"
                               required
                               readonly/>
                    </div>
                </div>
            </div>
        </fieldset>
        <fieldset>
            <legend>Your data</legend>
            <div class="form-row">
                <div class="form-group col-sm-6">
                    <label for="host-name">What's your name?</label>
                    <input th:field="*{participant.name}"
                           id="participant-name"
                           th:class="'form-control ' + ${#fields.hasErrors('participant.name') ? 'is-invalid' : ''}"
                           type="text"
                           placeholder="Angus Young"
                           required/>
                    <div id="participant-name-error"
                         class="invalid-feedback"
                         th:if="${#fields.hasErrors('participant.name')}">
                        Must be a valid email address.
                    </div>
                </div>
                <div class="form-group col-sm-6">
                    <label for="participant-email">What's your email?</label>
                    <div class="input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text">@</span>
                        </div>
                        <input th:field="*{participant.email}"
                               id="participant-email"
                               th:class="'form-control ' + ${#fields.hasErrors('participant.email') ? 'is-invalid' : ''}"
                               type="text"
                               placeholder="angusyoung@acdc.net"
                               required/>
                        <div id="participant-email-error"
                             class="invalid-feedback"
                             th:if="${#fields.hasErrors('participant.email')}">
                            Must be a valid email address.
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>
        <button type="submit"
                id="register-button"
                class="btn btn-primary my-3 mr-3"
                th:formaction="@{/wichteln/{eventId}/register(eventId=*{event.id})}">
            Register
        </button>
        <button type="reset"
                id="reset-button"
                class="btn btn-danger my-3">
            Reset
        </button>
    </form>
</div> <!-- /container -->
</body>
</html>